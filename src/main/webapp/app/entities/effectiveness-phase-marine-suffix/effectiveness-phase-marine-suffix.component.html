<div>
    <h2 id="page-heading">
        <span jhiTranslate="marineindustryprojApp.effectivenessPhase.home.title">Effectiveness Phases</span>
        <!--<button id="jh-create-entity" class="btn btn-primary float-right jh-create-entity create-effectiveness-phase-marine-suffix" [routerLink]="['/effectiveness-phase-marine-suffix/new']">
            <fa-icon [icon]="'plus'"></fa-icon>
            <span  jhiTranslate="marineindustryprojApp.effectivenessPhase.home.createLabel">
            Create new Effectiveness Phase
            </span>
        </button>-->
    </h2>
    <mi-alert></mi-alert>
    <br/>
    <div class="table-responsive" *ngIf="effectivenessPhases">
        <table class="table table-bordered table-sm">

            <tr>
                <th colspan="5"><span
                    jhiTranslate="marineindustryprojApp.effectivenessPhase.formHeader">formHeader</span></th>
                <th colspan="5">{{finalNiazsanjiReport.selectedEffectivenessPhaseLevelTitle}}</th>
                <th colspan="4"></th>
            </tr>
            <tr>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.courseTitle"> نام دوره: </span></th>
                <th colspan="4">{{finalNiazsanjiReport.educationalModuleTitle}} ( {{finalNiazsanjiReport.educationalModuleCode}} )
                </th>
                <th colspan="3"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.finishDate">تاریخ برگزاری دوره</span>
                </th>
                <th>{{(finalNiazsanjiReport.runPhases && finalNiazsanjiReport.runPhases.length > 0) ? finalNiazsanjiReport.runPhases[0].finishDate : ""}}</th>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.time">مدت</span></th>
                <th>{{finalNiazsanjiReport.educationalModuleTotalTime}}</th>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.teacher">استاد</span></th>
                <th colspan="2">{{finalNiazsanjiReport.teacherFullName}}</th>
                <!--<th></th>-->
            </tr>
            <tr>
                <!--<th jhiSortBy="id"><span jhiTranslate="global.field.id">ID</span> <fa-icon [icon]="'sort'"></fa-icon></th>-->
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.criteria">criteria</span></th>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhaseLevel.unitOfMeasurement">Unit Of Measurement</span>
                </th>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhaseLevel.goal">goal</span></th>
                <th colspan="2"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.real">real</span></th>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.finalScore">finalScore</span></th>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.weight">weight</span></th>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.weightedPoints">weightedPoints</span></th>
                <!--<th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.currentWeightedPoints">currentWeightedPoints</span></th>-->
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.startPhaseDate">Start Phase Date</span>
                </th>
                <th><span
                    jhiTranslate="marineindustryprojApp.effectivenessPhase.finishPhaseDate">Finish Phase Date</span>
                </th>
                <th><span
                    jhiTranslate="marineindustryprojApp.effectivenessPhase.peopleFinishCount">peopleFinishCount</span>
                </th>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.peopleCount">peopleCount</span></th>

                <!--<th jhiSortBy="firstScore"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.firstScore">First Score</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="secondScore"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.secondScore">Second Score</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="finalScore"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.finalScore">Final Score</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="description"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.description">Description</span> <fa-icon [icon]="'sort'"></fa-icon></th>-->
                <!--<th jhiSortBy="createUserLogin"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.createUserLogin">Create User Login</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="createDate"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.createDate">Create Date</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="modifyUserLogin"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.modifyUserLogin">Modify User Login</span> <fa-icon [icon]="'sort'"></fa-icon></th>
                <th jhiSortBy="modifyDate"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.modifyDate">Modify Date</span> <fa-icon [icon]="'sort'"></fa-icon></th>-->
                <!--<th jhiSortBy="finalNiazsanjiReportDescription"><span jhiTranslate="marineindustryprojApp.effectivenessPhase.finalNiazsanjiReport">Final Niazsanji Report</span> <fa-icon [icon]="'sort'"></fa-icon></th>-->

                <th></th>
            </tr>
            <tbody>
            <tr *ngFor="let effectivenessPhase of effectivenessPhases ;let i = index">
                <th>{{effectivenessPhase.effectivenessPhaseLevelTitle}}</th>
                <td jhiTranslate="{{'marineindustryprojApp.UnitOfMeasurement.' + effectivenessPhase.effectivenessPhaseLevel.unitOfMeasurement}}">
                    {{effectivenessPhase.effectivenessPhaseLevel.unitOfMeasurement}}
                </td>
                <td>{{effectivenessPhase.effectivenessPhaseLevel.goal}}</td>
                <td>{{effectivenessPhase.firstScore | number: '1.0-1'}}</td>
                <td>{{effectivenessPhase.secondScore | number: '1.0-1'}}</td>
                <td>{{effectivenessPhase.finalScore | number: '1.0-1'}}</td>
                <td>{{effectivenessPhase.effectivenessPhaseLevel.weight}}</td>
                <td>{{effectivenessPhase.weightedPoints | number: '1.0-1'}}</td>
                <!--<td>{{effectivenessPhase.currentWeightedPoints | number: '1.0-1'}}</td>-->
                <td>{{effectivenessPhase.startPhaseDate}}</td>
                <td>{{effectivenessPhase.finishPhaseDate}}</td>
                <td>{{effectivenessPhase.peopleFinishCount}}</td>
                <td>{{effectivenessPhase.peopleCount}}</td>
                <td class="text-right">
                    <div class="btn-group flex-btn-group-container">
                        <button type="button" *ngIf="effectivenessPhase.status == 0 && (i > 0 ? effectivenessPhases[i-1].status >= 20 : true)" (click)="startPhase(effectivenessPhase.id)"
                                class="btn btn-primary btn-sm">
                            <fa-icon [icon]="'forward'"></fa-icon>
                            <span class="d-none d-md-inline" jhiTranslate="entity.action.startPhase">View</span>
                        </button>
                        <button type="submit" *ngIf="effectivenessPhase.status == 10"
                                (click)="redirectToLevel(effectivenessPhase.effectivenessPhaseLevel.effectivenessLevel, effectivenessPhase.finalNiazsanjiReportId)"
                                class="btn btn-info btn-sm">
                            <fa-icon [icon]="'forward'"></fa-icon>
                            <span class="d-none d-md-inline" jhiTranslate="entity.action.continuePhase">continue Phase</span>
                        </button>
                        <button type="submit" *ngIf="effectivenessPhase.status >= 20"
                                (click)="redirectToLevel(effectivenessPhase.effectivenessPhaseLevel.effectivenessLevel, effectivenessPhase.finalNiazsanjiReportId)"
                                class="btn btn-info btn-sm">
                            <fa-icon [icon]="'eye'"></fa-icon>
                            <span class="d-none d-md-inline" jhiTranslate="entity.action.view">view</span>
                        </button>
                        <button type="submit" *jhiHasAnyAuthority="['ROLE_ADMIN', 'ROLE_EDIT']"
                                [routerLink]="['/effectiveness-phase-marine-suffix', effectivenessPhase.id, 'edit']"
                                class="btn btn-primary btn-sm">
                            <fa-icon [icon]="'pencil-alt'"></fa-icon>
                            <span class="d-none d-md-inline" jhiTranslate="entity.action.edit">Edit</span>
                        </button>
                    </div>
                </td>
            </tr>
            <tr>
                <th><span jhiTranslate="marineindustryprojApp.effectivenessPhase.finalAverage">finalAverage</span></th>
                <th>درصد</th>
                <th colspan="8">{{effectivenessPhases | sum:'weightedPoints' | number: '1.0-1'}}</th>
                <th colspan="4"></th>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="row" style="text-align: center;display: block;">
        <ng-container *ngIf="finalNiazsanjiReport && finalNiazsanjiReport.status < 40">
        <button type="button" *ngIf="canComplete"
                (click)="completeEffectivenessPhase(this.effectivenessPhase.finalNiazsanjiReportId)"
                class="btn btn-success">
            <fa-icon [icon]="'check-double'"></fa-icon>
            <span class="d-none d-md-inline" jhiTranslate="entity.action.complete">complete</span>
        </button>
        </ng-container>
    </div>

    <div class="alert alert-info">
        <span style="display: inline-block">
            <img src="/content/images/info.png" style="max-width: 25px; vertical-align: super;"/>
        </span>
        <span style="display: inline-block">
            <p>
                <span style="color: #127ccd">
                    ستون های واقعی :
                </span>
                <span style="color: blueviolet">
                    مقادیر محاسبه شده در همان مرحله می باشد، با توجه به مقادیری که در قسمت اثربخشی شان تکمیل نموده اید.
                </span>
            </p>
            <p>
                <span style="color: #127ccd">
                    ستون نتیجه :
                </span>
                <span style="color: blueviolet">
                    ستون میانگین کل می باشد که با توجه به مقادیری که تکمیل کرده اید به دست آمده اند. برای سطح یادگیری (اگر نمره میانگین کل بعد از امتحان منهای میانگین کل نمره قبل از امتحان بزرگتر از 25 بود میانگین نمره می شود 100. در غیر اینصورت حاصل تفریق تقسیم بر 25 و ضربدر 100 میشود.)
                </span>
            </p>
            <p>
                <span style="color: #127ccd">
                    ستون امتیاز موزون :
                </span>
                <span style="color: blueviolet">
                     حاصل ضرب ستون نتیجه در ستون وزن هر سطح تقسیم بر 100 می شود ستون امتیاز موزون آن سطح.
                </span>
            </p>
            <p>
                <span style="color: #127ccd">
                    درصد میانگین ارزیابی اثربخشی :
                </span>
                <span style="color: blueviolet">
                    حاصل جمع ستون امتیاز موزون می شود درصد میانگین ارزیابی اثربخشی
                </span>
            </p>
        </span>
    </div>

    <div class="row" style="text-align: center;display: block;">
        <img src="../../../content/images/effectiveness-phase/KerkPatrick-Second.PNG" style="width: 45%" />
        <img src="../../../content/images/effectiveness-phase/KerkPatrick-First.PNG" style="width: 45%" />
    </div>
</div>
